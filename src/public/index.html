<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ãƒ­ã‚´ä½ç½®èª¿æ•´ãƒ„ãƒ¼ãƒ«</title>
    <style>
        body { font-family: 'Helvetica Neue', Arial, sans-serif; background-color: #f0f2f5; margin: 0; padding: 20px; color: #333; }
        .container { max-width: 900px; margin: 0 auto; background: white; padding: 30px; border-radius: 12px; box-shadow: 0 4px 20px rgba(0,0,0,0.08); }
        h1 { font-size: 24px; color: #1a73e8; margin-bottom: 10px; }
        p.desc { font-size: 14px; color: #666; margin-bottom: 25px; line-height: 1.6; }
        
        .preview-area {
            position: relative;
            width: 595px; /* A4 width in px (approx) */
            height: 400px;
            border: 2px solid #ddd;
            background: white;
            margin: 0 auto 30px;
            overflow: hidden;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
        }
        
        /* Guide lines */
        .guide-h { position: absolute; width: 100%; height: 1px; border-top: 1px dashed #eee; left: 0; pointer-events: none; }
        .guide-v { position: absolute; height: 100%; width: 1px; border-left: 1px dashed #eee; top: 0; pointer-events: none; }

        .dummy-text { position: absolute; font-family: serif; color: #ccc; pointer-events: none; }
        .dummy-date { right: 40px; top: 80px; font-size: 14px; }
        .dummy-company { right: 115px; top: 140px; font-size: 18px; color: #999; font-weight: bold; border: 1px solid #eee; padding: 5px; }
        .dummy-seal { right: 55px; top: 125px; width: 56px; height: 56px; border: 2px double rgba(178, 34, 34, 0.3); border-radius: 4px; color: rgba(178, 34, 34, 0.3); display: flex; align-items: center; justify-content: center; font-size: 10px; }

        #logo {
            position: absolute;
            cursor: move;
            user-select: none;
            z-index: 10;
            border: 2px solid transparent;
            transition: border-color 0.2s;
        }
        #logo:hover { border-color: #1a73e8; }
        #logo.dragging { opacity: 0.8; border-color: #1a73e8; }

        .controls { background: #f8f9fa; padding: 20px; border-radius: 8px; border-left: 4px solid #1a73e8; }
        .coords { font-size: 18px; font-weight: bold; display: flex; gap: 30px; margin-bottom: 20px; }
        .coords span { color: #d93025; }
        
        .instructions { font-size: 14px; line-height: 1.8; }
        code { background: #eee; padding: 2px 6px; border-radius: 4px; font-family: monospace; font-weight: bold; }
        
        button { background: #1a73e8; color: white; border: none; padding: 10px 20px; border-radius: 6px; cursor: pointer; font-size: 14px; margin-top: 10px; }
        button:hover { background: #1765cf; }

        .alert { background: #fff3e0; border: 1px solid #ffe0b2; padding: 15px; border-radius: 8px; margin-top: 20px; font-size: 14px; }
    </style>
</head>
<body>

<div class="container">
    <h1>ãƒ­ã‚´ä½ç½®èª¿æ•´ãƒ„ãƒ¼ãƒ« (v5.0)</h1>
    <p class="desc">
        ãƒ­ã‚´ã‚’ãƒã‚¦ã‚¹ã§ãƒ‰ãƒ©ãƒƒã‚°ã—ã¦ã€æœ€é©ãªä½ç½®ã‚’æ±ºã‚ã¦ãã ã•ã„ã€‚<br>
        ã€Œç¾åœ¨ã®åº§æ¨™ã€ã‚’ã‚³ãƒ”ãƒ¼ã—ã¦ã€Botã®è¨­å®šï¼ˆç’°å¢ƒå¤‰æ•°ï¼‰ã«ç™»éŒ²ã™ã‚‹ã“ã¨ã§åæ˜ ã•ã‚Œã¾ã™ã€‚
    </p>

    <div class="preview-area" id="canvas">
        <div class="guide-h" style="top: 80px;"></div>
        <div class="guide-v" style="left: 360px;"></div>
        
        <div class="dummy-text dummy-date">2026å¹´ 2æœˆ 18æ—¥</div>
        <div class="dummy-text dummy-company" id="ref-company">æ ªå¼ä¼šç¤¾ãƒŸãƒŠãƒˆå®‰å…¨æ–½è¨­</div>
        <div class="dummy-text dummy-seal">ç¤¾å°</div>

        <img src="/assets/logo.png" id="logo" alt="Logo" width="120">
    </div>

    <div class="controls">
        <div class="coords">
            <div>LOGO_X: <span id="valX">---</span></div>
            <div>LOGO_Y: <span id="valY">---</span></div>
        </div>
        
        <div class="instructions">
            <strong>è¨­å®šæ‰‹é †:</strong><br>
            1. ãƒ­ã‚´ã‚’ãƒã‚¦ã‚¹ã§ãƒ‰ãƒ©ãƒƒã‚°ã—ã¦ã€ç†æƒ³ã®ä½ç½®ï¼ˆç¤¾åã®ç›´ä¸Šãªã©ï¼‰ã«åˆã‚ã›ã¾ã™ã€‚<br>
            2. ä¸Šè¨˜ã® <code>X</code> <code>Y</code> ã®æ•°å€¤ã‚’ã‚³ãƒ”ãƒ¼ã—ã¾ã™ã€‚<br>
            3. Render.com ã®ã‚¢ãƒ—ãƒªè¨­å®šç”»é¢ï¼ˆEnvironmentï¼‰ã® <b>LOGO_X</b> ã¨ <b>LOGO_Y</b> ã«è²¼ã‚Šä»˜ã‘ã¦ä¿å­˜ã—ã¦ãã ã•ã„ã€‚<br>
            <small>â€»åæ˜ ã«ã¯æ•°åˆ†ã‹ã‹ã‚Šã¾ã™ã€‚</small>
        </div>
    </div>

    <div class="alert">
        ğŸ’¡ <b>ãƒ’ãƒ³ãƒˆ:</b> è§’å°ï¼ˆç‚¹ç·šã®æ ï¼‰ã¨è¢«ã‚‹ä½ç½®ã«ç½®ã„ã¦ã‚‚å•é¡Œã‚ã‚Šã¾ã›ã‚“ã€‚ä¼šç¤¾åã®æ–‡å­—ãŒéš ã‚Œãªã„ç¨‹åº¦ã«èª¿æ•´ã™ã‚‹ã®ãŒãŠã™ã™ã‚ã§ã™ã€‚
    </div>
</div>

<script>
    const logo = document.getElementById('logo');
    const canvas = document.getElementById('canvas');
    const valX = document.getElementById('valX');
    const valY = document.getElementById('valY');

    let isDragging = false;
    let offsetX, offsetY;

    // PDFåº§æ¨™ç³»ã¸ã®æ›ç®— (PDFKitã®ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆãƒãƒ¼ã‚¸ãƒ³ã‚„ã‚¹ã‚±ãƒ¼ãƒ«ã‚’è€ƒæ…®)
    // Canvaså†…ã§ã®åº§æ¨™ã‚’ãã®ã¾ã¾PDFåº§æ¨™ã¨ã—ã¦æ‰±ã†ï¼ˆ1px = 1pt ç›¸å½“ï¼‰
    function updateCoords() {
        const x = parseInt(logo.style.left);
        const y = parseInt(logo.style.top);
        valX.innerText = x;
        valY.innerText = y;
    }

    // åˆæœŸä½ç½® (v4.3ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå€¤)
    logo.style.left = '440px'; // 360 + 80
    logo.style.top = '140px'; 
    updateCoords();

    logo.addEventListener('mousedown', (e) => {
        isDragging = true;
        logo.classList.add('dragging');
        offsetX = e.clientX - logo.offsetLeft;
        offsetY = e.clientY - logo.offsetTop;
    });

    document.addEventListener('mousemove', (e) => {
        if (!isDragging) return;
        
        let x = e.clientX - offsetX;
        let y = e.clientY - offsetY;

        // å¢ƒç•Œåˆ¶é™
        x = Math.max(0, Math.min(x, canvas.offsetWidth - logo.offsetWidth));
        y = Math.max(0, Math.min(y, canvas.offsetHeight - logo.offsetHeight));

        logo.style.left = x + 'px';
        logo.style.top = y + 'px';
        updateCoords();
    });

    document.addEventListener('mouseup', () => {
        isDragging = false;
        logo.classList.remove('dragging');
    });
</script>

</body>
</html>
